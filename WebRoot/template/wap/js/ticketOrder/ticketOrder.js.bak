function initTicketOrderClass(){$(".ticketOrderSelectCityClass").unbind().bind("click",function(){var t=$(this).attr("cityCode"),e=$(this).attr("cityName"),i=$("#ticketType"),c=$("#buyType"),n=$("#cityType");return $.ajax({type:"POST",dataType:"text",url:"/ticketOrder_setCitySelect.action",data:"cityType="+JM.encode(n)+"&ticketType="+JM.encode(i)+"&buyType="+JM.encode(c)+"&cityCode="+JM.encodeByValue(t)+"&cityName="+JM.encodeByValue(e)+"&random="+JM.randomNumber,success:function(t){"domestic"==i.val()?"single"==c.val()?window.location.href="/ticketOrder.action?direct=true":"goAndBack"==c.val()&&(window.location.href="/ticketOrder_goAndBack.action?direct=true"):"international"==i.val()&&("single"==c.val()?window.location.href="/ticketOrder_international.action?direct=true":"goAndBack"==c.val()&&(window.location.href="/ticketOrder_internationalGoAndBack.action?direct=true"))}}),$(".ticketOrderSelectCityClass").css("cursor","pointer"),!1}),$("#queryCityKeyword").bind("keyup",function(){selectCityByKeyword()}).bind("keydown",function(){selectCityByKeyword()}).bind("input",function(){selectCityByKeyword()}).bind("keypress",function(){selectCityByKeyword()})}function initialSelectCityPre(){$(".selectCityClass").unbind().bind("click",function(){window.location.href="/ticketOrder_selectCity.action?ticketType="+$(this).attr("ticketType")+"&buyType="+$(this).attr("buyType")+"&cityType="+$(this).attr("cityType")+"&random="+JM.randomNumber}),$(".selectCityClass").css("cursor","pointer")}function ticketOrderClassInit(){$(".ticketOrderBtnClass").unbind().bind("click",function(){var t=$("#date1"),e=$("#date2"),i=$("#city1"),c=$("#city2");return $.ajax({type:"POST",dataType:"text",url:"/ticketOrder_parseInfoToGetUrl.action",data:"ticketType="+i.attr("ticketType")+"&buyType="+i.attr("buyType")+"&date1="+t.val()+"&date2="+e.val()+"&city1="+i.attr("cityCode")+"&city2="+c.attr("cityCode")+"&random="+JM.randomNumber,success:function(t){JM.isNull(t)||"#"==t||(window.location.href=t)}}),!1})}function changeCityOpiInit(){$(".changeCityPoiOrder").bind("click",function(){$(".changeCityPoiOrder").removeClass("selected"),$(this).addClass("selected");var t=$(this).attr("cityPoi");$("#cityPoi").val(t),$.ajax({type:"POST",dataType:"text",url:"/airport_changeCityPositionOrder.action",data:"flag="+t+"&random="+JM.randomNumber,success:function(t){$("#cityList").html(t),initTicketOrderClass()}})})}function selectCityByKeyword(){var t=$("#queryCityKeyword"),e=$("#domOrInt").val(),i=$("#ticketType"),c=$("#buyType"),n=$("#cityType");return JM.isNullByJQuery(t)?(t.focus(),$("#selectCityDiv").hide(),!1):($("#selectCityDiv").show(),void $.ajax({type:"POST",dataType:"text",url:"/airport_selectCityAjax.action",data:"flag="+e+"&keyword="+JM.encode(t)+"&random="+JM.randomNumber,success:function(t){JM.isNull(t)||($("#selectCityDiv").html(t),$("#selectCityDiv").find("dd").bind("tap",function(){$.ajax({type:"POST",dataType:"text",url:"/ticketOrder_setCitySelect.action",data:"cityType="+JM.encode(n)+"&ticketType="+JM.encode(i)+"&buyType="+JM.encode(c)+"&cityCode="+JM.encodeByValue($(this).attr("cityCode"))+"&cityName="+JM.encodeByValue($(this).attr("cityName"))+"&random="+JM.randomNumber,success:function(t){"domestic"==i.val()?"single"==c.val()?window.location.href="/ticketOrder.action?direct=true":"goAndBack"==c.val()&&(window.location.href="/ticketOrder_goAndBack.action?direct=true"):"international"==i.val()&&("single"==c.val()?window.location.href="/ticketOrder_international.action?direct=true":"goAndBack"==c.val()&&(window.location.href="/ticketOrder_internationalGoAndBack.action?direct=true"))}})}))}}))}$(function(){initialSelectCityPre(),initTicketOrderClass(),ticketOrderClassInit(),changeCityOpiInit()});