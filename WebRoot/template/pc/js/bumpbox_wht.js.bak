window.addEvent("domready",function(){imgstore=new Array;var e=$$(".bumpbox_white");i=0,e.each(function(e){var t=e.get("href");if(t.indexOf(".jpg")!=-1||t.indexOf(".gif")!=-1||t.indexOf(".png")!=-1){var n=new Element("img");n.src=t,n.setStyle("display","none"),n.inject(document.body)}if(0==e.get("href").indexOf("^")){var o=e.get("href").replace("^","");$(o).setStyle("display","none")}e.set("id",i),i++});i=0,$$(".bumpbox_white").addEvent("click",function(t){if(t=new Event(t).stop(),null!=$("grow")&&$("grow").dispose(),null!=this.get("rev"))var i=this.get("rev");var n=this.get("href"),o=this.get("id");maxw=0,maxh=0;var d="";if(null!=this.get("rel")){var r=this.get("rel").split("-");maxw=r[0],maxh=r[1]}null!=this.get("title")&&(d=this.get("title")),null!=this.get("href")&&(hr=this.get("href")),0==maxw&&(maxw=640),0==maxh&&(maxh=480),n.indexOf(".jpg")==-1&&n.indexOf(".gif")==-1&&n.indexOf(".png")==-1||(img=new Image,img.src=n,maxw=img.width,maxh=img.height),w=window.getSize().x.toInt(),h=window.getSize().y.toInt(),s=window.getScrollTop();var l=w/2,a=h/2,p=(w-maxw)/2,x=(h-maxh)/2+s,g=new Element("div",{styles:{width:"1px",height:"1px",position:"absolute",border:"2px solid #676767",padding:"4px",background:"#fff url(ajax-loader.gif) no-repeat center center",left:l,top:a,cursor:"pointer",display:"block","z-index":"100000"},id:"grow"});$(g).setStyles({"-moz-border-radius":"10px","-webkit-border-radius":"10px","border-radius":"10px"});var f=window.getScrollTop();if(bg=new Element("div",{styles:{background:"#000",width:"100%",height:"100%",opacity:"0.7",position:"absolute",top:f,left:0},id:"bg"}),"trident"==Browser.Engine.name&&4==Browser.Engine.version){var m=window.getHeight();$(bg).setStyle("height",m)}var c=new Element("img",{styles:{width:"63px",height:"63px",position:"absolute",top:"-30px",right:"-30px","z-index":"100000"},src:"images/closed.png",id:"nycloser"});c.addEvent("click",function(e){bg.dispose(),$(g).getChildren().dispose(),u.start({width:[maxw,1],height:[maxh,1],left:[p,l],top:[x,a+s]})}),"trident"!=Browser.Engine.name?window.addEvent("keyup",function(e){"esc"==e.key&&(bg.dispose(),$(g).getChildren().dispose(),u.start({width:[maxw,1],height:[maxh,1],left:[p,l],top:[x,a+s]}))}):document.addEvent("keyup",function(e){"esc"==e.key&&(bg.dispose(),$(g).getChildren().dispose(),u.start({width:[maxw,1],height:[maxh,1],left:[p,l],top:[x,a+s]}))}),bg.inject(document.body),g.injectInside(document.body),c.injectInside(g),window.addEvent("scroll",function(){$(bg).setStyle("top",window.getScrollTop())});var u=(new Fx.Morph($("grow"),{transition:Fx.Transitions.linear,duration:2e3,wait:"link",onComplete:function(){g.dispose()}}),new Fx.Morph($("grow"),{transition:Fx.Transitions.Bounce.easeOut,duration:300,wait:"link",onComplete:function(){g.dispose()}})),b=new Fx.Morph($("grow"),{transition:Fx.Transitions.Bounce.easeOut,duration:1200,wait:"link",onComplete:function(){if($(g).setStyle("background","#fff"),null!=$("prev")&&$("prev").setStyle("display","block"),null!=$("next")&&$("next").setStyle("display","block"),$("grow").setStyle("-moz-box-shadow","3px 3px #000"),n.indexOf(".jpg")!=-1||n.indexOf(".gif")!=-1||n.indexOf(".png")!=-1){var e=new Element("img");e.src=n,maxw=e.width,maxh=e.height,$(e).inject(g)}else if(n.indexOf(".flv")==-1&&n.indexOf(".mp3")==-1&&n.indexOf(".pdf")==-1&&n.indexOf(".swf")==-1&&n.indexOf(".jpg")==-1&&n.indexOf(".gif")==-1&&n.indexOf(".png")==-1&&n.indexOf("^")==-1){var t=new Element("div");t.setStyle("display","block"),t.setStyle("overflow","hidden"),t.setStyle("padding","20px"),t.setStyle("height",maxh-40),t.setStyle("width",maxw-40),t.setAttribute("id","htmlframe"),t.inject(g);var o=new IFrame;o.setStyle("overflow","auto"),o.set("frameborder","0"),o.setStyle("width",maxw-40),o.setStyle("height",maxh-40),o.src=n,o.inject(t)}else if(n.indexOf(".pdf")!=-1){var s=new Element("div",{styles:{padding:"20px",height:maxh-40,width:maxw-40}});s.inject(g);var o=new IFrame;o.src=n,o.setStyle("width",maxw-40),o.setStyle("height",maxh-40),o.inject(s)}else if(n.indexOf(".swf")!=-1){var s=new Element("div",{styles:{padding:"20px",height:maxh-40,width:maxw-40},id:"swf"});s.inject(g);new Swiff(n,{id:"video",width:maxw-40,height:maxh-40,container:s})}else if(n.indexOf(".flv")!=-1){var s=new Element("div",{styles:{padding:"20px",height:maxh-40,width:maxw-40}});s.inject(g);var r=flowplayer(s,"flowplayer.swf",{buffering:!0,autoplay:!0,clip:n,wmode:"transparent",id:"player"})}else if(n.indexOf(".mp3")!=-1){var s=new Element("div",{styles:{padding:"20px",height:maxh-50,width:maxw-40,"z-index":"1",id:"flowplay"}});s.inject(g),r=flowplayer(s,"flowplayer.swf",{buffering:!0,autoplay:!0,clip:n,wmode:"transparent",plugins:{myContent:{url:"flowplayer.content.swf",bottom:0,width:maxw-20,left:0,borderRadius:10,html:d,onClick:function(){this.hide()}}},playlist:[{url:n,autoPlay:!0}]})}else if(0==n.indexOf("^")){n=n.replace("^","");var s=new Element("div",{styles:{padding:"20px",height:"auto",width:"auto",color:"#fff",overflow:"hidden"}}),l=$(n).get("html");s.set("html",l),s.inject(g)}if(""!=d){var a=new Element("div",{styles:{height:"20px",position:"absolute",top:"-41px",left:"20px",color:"#eee",opacity:"0.7","z-index":"10000",background:"#000","-webkit-border-radius":"5px","-moz-border-radius":"5px","-border-radius":"5px",display:"block",padding:"10px","border-top":"2px solid #676767","border-left":"2px solid #676767","border-right":"2px solid #676767"}});a.set("html",d),a.inject(g),a.set("id","maindesc")}if(null!=i){var p=new Element("div",{styles:{width:"auto",height:"20px",position:"absolute",left:"20px",bottom:"-41px",color:"#eee","text-decoration":"none",background:"#000","-webkit-border-radius":"5px","-moz-border-radius":"5px","-border-radius":"5px",display:"block",padding:"10px","border-bottom":"2px solid #303132","border-left":"2px solid #303132","border-right":"2px solid #303132"}});p.inject(g),p.set("html",i),p.set("id","addondesc")}}});$(bg).addEvent("click",function(e){bg.dispose(),$(g).getChildren().dispose(),u.start({width:[maxw,1],height:[maxh,1],left:[p,l],top:[x,a+s]})});var v=this.get("id").toInt()+1;if(null!=e[v]){var y=(maxh-30)/2,E=new Element("a",{styles:{width:"0px",height:"0px",background:"url(/scripts/js/bumpbox/next.png) no-repeat center center",position:"absolute",right:"-20px",bottom:y,display:"none"},id:"next"});E.addEvent("click",function(e){Browser.Engine.trident&&(null!=$("video")&&$("video").stop(),null!=$("swf")&&$("swf").dispose()),$("bg").dispose(),$("grow").dispose();var t=o.toInt();t+=1,t=t.toString(),$(t).fireEvent("click",this)}),E.inject(g)}var k=this.get("id").toInt()-1;if(null!=e[k]){var y=(maxh-30)/2,S=new Element("a",{styles:{width:"0px",height:"0px",background:"url(/scripts/js/bumpbox/prev.png) no-repeat center center",position:"absolute",left:"-20px",bottom:y,display:"none"},id:"prev"});S.addEvent("click",function(e){Browser.Engine.trident&&(null!=$("video")&&$("video").stop(),null!=$("swf")&&$("swf").dispose()),$("bg").dispose(),$("grow").dispose();var t=o.toInt();t-=1,t=t.toString(),$(t).fireEvent("click",this)}),S.inject(g)}b.start({width:[1,maxw],height:[1,maxh],left:[l,p],top:[a+s,x]})})});