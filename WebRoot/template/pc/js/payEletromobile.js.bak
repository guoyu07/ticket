function loginBuy(){var t=$(this);t.prop("checked")&&JM.goUrl("pcBjdjMember.action")}function isvalid1(){var t=$("#payForm");t.Validform({btnSubmit:"#baiduPay",tiptype:function(t,a,e){if(a.obj.is("form")){var o=a.obj.find("#msgdemo");e(o,a.type),o.text(t)}else{var o=a.obj.siblings(".Validform_checktip");e(o,a.type),o.text(t)}},ajaxPost:!0,beforeSubmit:function(t){return constructOrder(),!1}})}function isvalid(){var t=$("#payForm");t.Validform({btnSubmit:"#go_pay",tiptype:function(t,a,e){if(a.obj.is("form")){var o=a.obj.find("#msgdemo");e(o,a.type),o.text(t)}else{var o=a.obj.siblings(".Validform_checktip");e(o,a.type),o.text(t)}},ajaxPost:!0,beforeSubmit:function(t){return constructOrder(),!1}})}function total(){var t=$("#num").val(),a=parseInt(t),e=$("#priceid").text(),o=e.substring(0,e.length-1),i=parseFloat(o),r=a*i;$("#total").html("￥"+r)}function checkPhone(){var t=$("#payForm").Validform().check(!1,"#mobile");return!!t}function getCaptcha(){var t=$("#getCaptcha"),a=$("#mobile").val();checkPhone()&&$.ajax({url:"pcElectromobile_generateAuthCode.action",type:"post",dataType:"json",data:{mobile:a},success:function(a){if("y"==a.status)var e=t.val(),o=60,i=setInterval(function(){o>0?(t.show(),$("#hqyzm").hide(),t.attr("disabled","disabled"),t.val(--o+"秒后重新获取...")):(t.hide(),$("#hqyzm").show(),t.removeAttr("disabled"),t.val(e),clearInterval(i))},1e3);else JM.alert(a.info,2e3)}})}function constructOrder(){var t=$("#mobile").val(),a=$("#inputCaptcha").val(),e=$("#num").val();isNan()&&$.ajax({url:"pcElectromobile_constructOrder.action",type:"post",dataType:"json",data:{mobile:t,authCode:a,count:e},success:function(t){"y"==t.status?JM.alert("请求中...",2e3,JM.goUrl(t.info)):JM.alert(t.info,2e3)},error:function(){alert(1)}})}function constructOrder2(){var t=$("#num").val();isNan()&&$.ajax({url:"pcElectromobile_constructOrder2.action",type:"post",dataType:"json",data:{count:t},success:function(t){"y"==t.status?JM.alert("请求中。。。",2e3,JM.goUrl(t.info)):JM.alert(t.info,2e3)},error:function(){alert("服务器出错了")}})}$(function(){total(),$("#num").blur(total),$("#addSum").click(total),$("#cutSum").click(total),$("#hqyzm").click(getCaptcha),$("#loginBuy").change(loginBuy);var t=$("#isLogin").attr("id");void 0!=t?isvalid():$("#go_pay").click(constructOrder2)});